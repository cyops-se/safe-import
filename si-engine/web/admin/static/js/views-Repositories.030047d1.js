(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views-Repositories"],{"0d99":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Approved repositories")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",s,!1),i),[e._v(" New repository ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[e._v("Repository")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"URL",outlined:"","hide-details":""},model:{value:e.editedItem.url,callback:function(t){e.$set(e.editedItem,"url",t)},expression:"editedItem.url"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-checkbox",{staticClass:"mt-n3",attrs:{label:"Recursive download","hide-details":"",value:!e.editedItem||e.editedItem.recursive},model:{value:e.editedItem.recursive,callback:function(t){e.$set(e.editedItem,"recursive",t)},expression:"editedItem.recursive"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"User name",outlined:"","hide-details":""},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Password",outlined:"","hide-details":""},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-1",on:{click:function(t){return e.playItem(i)}}},[e._v(" mdi-play ")]),a("v-icon",{staticClass:"mr-1",on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}}])})},s=[],o=(a("159b"),a("ac1f"),a("5319"),a("a434"),a("c5fa")),d={name:"Repositories",data:function(){return{dialog:!1,dialogDelete:!1,search:"",loading:!1,headers:[{text:"ID",align:"start",filterable:!1,value:"ID",width:75},{text:"URL",value:"url",width:"50%"},{text:"User",value:"username",width:"10%"},{text:"Last Success",value:"lastsuccessmod",width:"10%"},{text:"Last Failure",value:"lastfailuremod",width:"10%"},{text:"Available",value:"available",width:"10%"},{text:"Actions",value:"actions",width:"100px",sortable:!1}],items:[],editedIndex:-1,editedItem:{},defaultItem:{}}},created:function(){var e=this;this.loading=!0,this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,o["a"].get("repo").then((function(t){var a=JSON.parse(t.data.items.payload);a.forEach((function(e){e.lastsuccessmod=e.lastsuccess.replace("T"," ").substring(0,19),e.lastfailuremod=e.lastfailure.replace("T"," ").substring(0,19)})),e.items=a,e.loading=!1})).catch((function(e){console.log("ERROR response: "+e.message)}))},methods:{initialize:function(){},playItem:function(e){var t=this,a=this;o["a"].get("repo/download/"+e.ID).then((function(e){console.log("Download request response: "+e.data.data.payload),a.$notification.success("Repository download started!"),t.loading=!1})).catch((function(e){console.log("ERROR response: "+e.message)}))},editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this,a=this;o["a"].delete("repo/"+e.ID).then((function(i){for(var s=0;s<t.items.length;s++)t.items[s].ID===e.ID&&t.items.splice(s,1);a.$notification.success("Repository deleted!")})).catch((function(e){console.log("ERROR response: "+e.message),a.$notification.error("Failed to delete respoitory!"+e.message)}))},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},save:function(){var e=this;console.log("edit item"+JSON.stringify(this.editedItem));var t=this;this.editedIndex>-1?(Object.assign(this.items[this.editedIndex],this.editedItem),o["a"].put("repo/"+this.editedItem.ID,this.editedItem).then((function(e){t.$notification.success("Repository updated!")})).catch((function(e){console.log("Failed to update respoitory! "+JSON.stringify(e)),t.$notification.error("Failed to update respoitory!"+e.message)}))):o["a"].post("repo",this.editedItem).then((function(t){console.log("Respoitory created! "+t.data.data.payload);var a=JSON.parse(t.data.data.payload);e.$notification.success("Repository created!"),e.items.push(a)})).catch((function(e){console.log("Failed to create respoitory! "+e.message),this.$notification.error("Failed to create respoitory!"+e)})),this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1,this.close()}}},n=d,l=(a("50a4"),a("2877")),r=a("6544"),c=a.n(r),u=a("8336"),m=a("b0af"),v=a("99d9"),f=a("ac7c"),p=a("62ad"),h=a("a523"),I=a("8fea"),b=a("169a"),g=a("ce7e"),x=a("132d"),w=a("0fd9"),y=a("2fa4"),k=a("8654"),R=a("71d9"),_=a("2a7f"),V=Object(l["a"])(n,i,s,!1,null,null,null);t["default"]=V.exports;c()(V,{VBtn:u["a"],VCard:m["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCheckbox:f["a"],VCol:p["a"],VContainer:h["a"],VDataTable:I["a"],VDialog:b["a"],VDivider:g["a"],VIcon:x["a"],VRow:w["a"],VSpacer:y["a"],VTextField:k["a"],VToolbar:R["a"],VToolbarTitle:_["a"]})},"2a7f":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a("71d9"),s=a("80d2"),o=Object(s["j"])("v-toolbar__title"),d=Object(s["j"])("v-toolbar__items");i["a"]},"50a4":function(e,t,a){"use strict";a("e972")},e972:function(e,t,a){}}]);
//# sourceMappingURL=views-Repositories.030047d1.js.map